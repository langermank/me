---
import Socials from './Socials.astro';
import { Image } from 'astro:assets';
import lightHeadshot from './images/headshot-light.jpg';
import darkHeadshot from './images/headshot-dark.jpg';


const isDiyDomain = Astro.site?.hostname?.includes('diy') || false;

// Dynamic URL configuration
const mainSiteUrl = import.meta.env.PROD ? 'https://katielangerman.com' : 'http://localhost:4321';
const diySiteUrl = import.meta.env.PROD ? 'https://katielangerman.diy' : 'http://localhost:4322';

const workUrl = isDiyDomain ? mainSiteUrl : '/';
const notWorkUrl = isDiyDomain ? '/' : diySiteUrl;

// Determine current page for aria-current
const isOnWorkSite = !isDiyDomain; // Main site is "work"
const isOnDiySite = isDiyDomain; // DIY site is "not work"
---

<header>
  <div class="headshot">
    <Image
      src={lightHeadshot}
      alt="Katie Langerman"
      class="headshot-light"
    />
    <Image
      src={darkHeadshot}
      alt="Katie Langerman"
      class="headshot-dark"
    />
  </div>
  <h1 class="site-title">Katie Langerman</h1>
  <nav class="site-nav mobile">
    <ul>
      <li>
      <a href={workUrl} aria-current={isOnWorkSite && Astro.url.pathname === '/' ? 'page' : undefined}>
        Work
      </a>
    </li>
      {isOnWorkSite && (
        <li>
          <a href="/cv" aria-current={Astro.url.pathname === '/cv' ? 'page' : undefined}>CV</a>
        </li>
      )}

      <!-- <li>
        <a href={notWorkUrl} aria-current={isOnDiySite ? 'page' : undefined}>Not work</a>
      </li> -->
    </ul>
  </nav>
</header>

<nav class="site-nav desktop">
  <ul>
    <li>
      <a href={workUrl} aria-current={isOnWorkSite && Astro.url.pathname === '/' ? 'page' : undefined}>
        Work
      </a>
    </li>
    {isOnWorkSite && (
      <li>
        <a href="/cv" aria-current={Astro.url.pathname === '/cv' ? 'page' : undefined}>CV</a>
      </li>
    )}
    <!-- <li>
      <a href={notWorkUrl} aria-current={isOnDiySite ? 'page' : undefined}>Not work</a>
    </li> -->
  </ul>
  <Socials />
</nav>
